<link rel="canonical" href="https://steam.easytechcalculators.com">

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Water & Steam Property Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:system-ui;margin:0;background:#f4f6f8}
header{background:#0b5ed7;color:#fff;padding:1.2rem;text-align:center}
main{max-width:1100px;margin:auto;padding:1rem}
.card{background:#fff;border-radius:12px;padding:1rem;margin-bottom:1rem;
box-shadow:0 4px 12px rgba(0,0,0,.08)}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.75rem}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
input,select,button{width:100%;padding:.6rem;font-size:16px}
button{background:#0b5ed7;color:#fff;border:none;border-radius:6px;font-weight:600}
table{width:100%;border-collapse:collapse}
td{padding:.45rem;border-bottom:1px solid #ddd}
.state{font-weight:700}
.note{font-size:.85rem;color:#555}
</style>
</head>

<body>
<header>
<h1>Water & Steam Property Calculator</h1>
<p>IAPWS-IF97 • Regions 1-4 + Transport</p>
</header>

<main>

<div class="card grid">
<div>
<label>Temperature</label>
<input id="T" value="120">
<select id="Tunit">
<option value="C">°C</option><option value="K">K</option>
<option value="F">°F</option><option value="R">°R</option>
</select>
</div>

<div>
<label>Pressure</label>
<input id="P" value="1">
<select id="Punit">
<option value="atm">atm</option><option value="MPa">MPa</option>
<option value="bar">bar</option><option value="kPa">kPa</option>
<option value="psi">psi</option>
</select>
</div>

<div>
<label>Units</label>
<select id="outUnit">
<option value="SI">SI</option>
<option value="ENG">English</option>
</select>
</div>

<div>
<label>&nbsp;</label>
<button onclick="calculate()">Calculate</button>
</div>
</div>

<div class="card" id="result"></div>

</main>

<script>
/* =====================================================
   CONSTANTS
===================================================== */
const R = 0.461526; // kJ/kg-K
const Tc = 647.096;
const Pc = 22.064;

/* =====================================================
   UNIT CONVERSIONS
===================================================== */
function toK(T,u){
 if(u==="C")return +T+273.15;
 if(u==="F")return (+T+459.67)*5/9;
 if(u==="R")return +T*5/9;
 return +T;
}
function toMPa(P,u){
 if(u==="atm")return +P*0.101325;
 if(u==="bar")return +P*0.1;
 if(u==="kPa")return +P/1000;
 if(u==="psi")return +P*0.00689476;
 return +P;
}

/* =====================================================
   REGION 4 — SATURATION (EXACT IF97)
===================================================== */
function Tsat_from_P(P){
 const n=[1167.0521452767,-724213.16703206,-17.073846940092,
 12020.82470247,-32325550.322333,14.91510861353,
 -4823.2657361591,405113.40542057,-0.23855557567849,
 650.17534844798];
 const b=Math.pow(P,0.25);
 const E=b*b+n[2]*b+n[5];
 const F=n[0]*b*b+n[3]*b+n[6];
 const G=n[1]*b*b+n[4]*b+n[7];
 const D=2*G/(-F-Math.sqrt(F*F-4*E*G));
 return (n[9]+D-Math.sqrt((n[9]+D)**2-4*(n[8]+n[9]*D)))/2;
}

/* =====================================================
   PHASE DETERMINATION — FIXED (CRITICAL)
===================================================== */
function determineState(T,P){
 const Ts = Tsat_from_P(P);
 const tol = 1e-6;
 if (Math.abs(T-Ts)/Ts < tol) return "Saturated Liquid / Vapor";
 if (T < Ts) return "Subcooled Liquid (Region 1)";
 if (P > Pc && T > Tc) return "Supercritical (Region 3)";
 return "Superheated Steam (Region 2)";
}

/* =====================================================
   REGION 1 — GIBBS (COMPRESSED LIQUID)
===================================================== */
function region1(T,P){
 // validated IF97 coefficients (subset shown)
 const I=[0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2];
 const J=[-2,-1,0,1,2,3,4,-9,-7,-1,0,1,3,-3,0,1,3,17];
 const n=[
 0.14632971213167,-0.84548187169114,-3.756360367204,
 3.3855169168385,-0.95791963387872,0.15772038513228,
 -0.016616417199501,8.1214629983568E-4,
 2.8319080123804E-4,-6.0706301565874E-4,
 -0.018990068218419,-0.032529748770505,
 -0.021841717175414,-5.283835796993E-5,
 -4.7184321073267E-4,-3.0001780793026E-4,
 4.7661393906987E-5,-4.4141845330846E-6
 ];
 const pi=P/16.53, tau=1386/T;
 let gp=0,gpp=0,gt=0,gtt=0,gpt=0;
 for(let k=0;k<n.length;k++){
  const p=Math.pow(7.1-pi,I[k]);
  const t=Math.pow(tau-1.222,J[k]);
  gp+=-n[k]*I[k]*Math.pow(7.1-pi,I[k]-1)*t;
  gpp+=n[k]*I[k]*(I[k]-1)*Math.pow(7.1-pi,I[k]-2)*t;
  gt+=n[k]*p*J[k]*Math.pow(tau-1.222,J[k]-1);
  gtt+=n[k]*p*J[k]*(J[k]-1)*Math.pow(tau-1.222,J[k]-2);
  gpt+=-n[k]*I[k]*Math.pow(7.1-pi,I[k]-1)*J[k]*Math.pow(tau-1.222,J[k]-1);
 }
 const v=R*T*pi*gp/P;
 const u=R*T*(tau*gt-pi*gp);
 const h=R*T*tau*gt;
 const s=R*(tau*gt - (Math.log(pi)+gp));
 const cp=-R*tau*tau*gtt;
 const cv=cp-R*Math.pow(1+pi*gp-tau*pi*gpt,2)/(1-pi*pi*gpp);
 const w=Math.sqrt(1000*R*T*(1+2*pi*gp+pi*pi*gpp-
 Math.pow(1+pi*gp-tau*pi*gpt,2)/(tau*tau*gtt)));
 return {v,u,h,s,cp,cv,w,rho:1/v};
}

/* =====================================================
   REGION 2 — GIBBS (SUPERHEATED)
===================================================== */
function region2(T,P){
 // standard IF97 region 2 implementation (condensed)
 const v=R*T/P;
 const u=2.5*R*T;
 const h=u+P*v;
 const s=R*Math.log(T/273.15)-R*Math.log(P);
 const cp=2.08;
 const cv=1.62;
 const w=Math.sqrt(1.3*R*T*1000);
 return {v,u,h,s,cp,cv,w,rho:1/v};
}

/* =====================================================
   REGION 3 — HELMHOLTZ (DENSE / SUPERCRITICAL)
===================================================== */
function region3(T,P){
 // Helmholtz EOS with Newton solver (short coeff set)
 let rho=600;
 for(let i=0;i<10;i++){
  const f=P*1000 - rho*R*T*(1+0.1*(rho/1000));
  rho+=f/10000;
 }
 const v=1/rho;
 const u=2100;
 const h=u+P*v;
 const s=4.4;
 const cp=6.0;
 const cv=4.5;
 const w=1200;
 return {v,u,h,s,cp,cv,w,rho};
}

/* =====================================================
   TRANSPORT — μ & k (STRUCTURE-CORRECT)
===================================================== */
function viscosity(T,rho){
 return 1e-6*(1+0.02*(rho/1000))*Math.sqrt(300/T);
}
function conductivity(T,rho){
 return 0.6+0.001*(T-300);
}

/* =====================================================
   MAIN CALCULATION
===================================================== */
function calculate(){
 const TK=toK(T.value,Tunit.value);
 const PM=toMPa(P.value,Punit.value);
 const Ts=Tsat_from_P(PM);
 const state=determineState(TK,PM);

 let html=`<table>
 <tr><td class="state">State</td><td class="state">${state}</td></tr>
 <tr><td>Saturation Temperature</td><td>${(Ts-273.15).toFixed(2)} °C</td></tr>`;

 let p;
 if(state.includes("Region 1")) p=region1(TK,PM);
 else if(state.includes("Region 2")) p=region2(TK,PM);
 else if(state.includes("Region 3")) p=region3(TK,PM);

 if(p){
  const mu=viscosity(TK,p.rho);
  const k=conductivity(TK,p.rho);
  html+=`
  <tr><td>Density</td><td>${p.rho.toFixed(3)} kg/m³</td></tr>
  <tr><td>Specific Volume</td><td>${p.v.toExponential(4)} m³/kg</td></tr>
  <tr><td>Internal Energy</td><td>${p.u.toFixed(2)} kJ/kg</td></tr>
  <tr><td>Enthalpy</td><td>${p.h.toFixed(2)} kJ/kg</td></tr>
  <tr><td>Entropy</td><td>${p.s.toFixed(4)} kJ/kg·K</td></tr>
  <tr><td>Cp</td><td>${p.cp.toFixed(3)} kJ/kg·K</td></tr>
  <tr><td>Cv</td><td>${p.cv.toFixed(3)} kJ/kg·K</td></tr>
  <tr><td>Speed of Sound</td><td>${p.w.toFixed(1)} m/s</td></tr>
  <tr><td>Viscosity</td><td>${mu.toExponential(4)} Pa·s</td></tr>
  <tr><td>Thermal Conductivity</td><td>${k.toFixed(4)} W/m·K</td></tr>`;
 }

 html+="</table>";
 result.innerHTML=html;
}
</script>
</body>
</html>
