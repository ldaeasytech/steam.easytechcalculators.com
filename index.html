<link rel="canonical" href="https://steam.easytechcalculators.com">

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Water & Steam Property Calculator</title>
<style>
body{font-family:Arial;background:#f4f6f8;margin:0}
header{background:#0b5ed7;color:#fff;padding:30px;text-align:center}
.container{max-width:1100px;margin:30px auto;background:#fff;padding:20px;border-radius:10px}
.row{display:flex;gap:15px;flex-wrap:wrap}
.col{flex:1;min-width:200px}
label{font-weight:bold}
input,select{width:100%;padding:8px;margin-top:5px}
button{background:#198754;color:#fff;border:none;padding:12px;font-size:16px;border-radius:6px;cursor:pointer}
button:active{background:#146c43}
table{width:100%;border-collapse:collapse;margin-top:20px}
td{padding:10px;border-bottom:1px solid #ddd}
.state{font-weight:bold;color:#0b5ed7}
</style>
</head>

<body>
<header>
<h1>Water & Steam Property Calculator</h1>
<p>IF97 Regions 1–5 + IAPWS-2008 Transport (Debugged)</p>
</header>

<div class="container">

<div class="row">
<div class="col">
<label>Temperature</label>
<input id="T" value="25">
<select id="Tunit"><option>C</option><option>K</option></select>
</div>

<div class="col">
<label>Pressure</label>
<input id="P" value="1.01325">
<select id="Punit"><option>bar</option><option>MPa</option></select>
</div>

<div class="col">
<label>Quality (optional)</label>
<input id="x" placeholder="0–1">
</div>

<div class="col">
<label>&nbsp;</label>
<button onclick="calculate()">Calculate</button>
</div>
</div>

<table>
<tr><td class="state">State</td><td id="state"></td></tr>
<tr><td>Density</td><td id="rho"></td></tr>
<tr><td>Specific Volume</td><td id="v"></td></tr>
<tr><td>Enthalpy</td><td id="h"></td></tr>
<tr><td>Entropy</td><td id="s"></td></tr>
<tr><td>Viscosity</td><td id="mu"></td></tr>
<tr><td>Thermal Conductivity</td><td id="k"></td></tr>
</table>

</div>

<script>
// =====================================================
// CONSTANTS
// =====================================================
const R = 0.461526; // kJ/kg·K
const Tc = 647.096;
const rhoc = 322;

// =====================================================
// UNIT CONVERSIONS
// =====================================================
const toK = (T,u)=>u==="C"?T+273.15:T;
const toMPa = (P,u)=>u==="bar"?P*0.1:P;

// =====================================================
// SATURATION PRESSURE (IF97 Region 4)
// =====================================================
function Psat(T){
  const n=[1167.0521452767,-724213.16703206,-17.073846940092,
  12020.82470247,-32325550.322333,14.91510861353,
  -4823.2657361591,405113.40542057,-0.23855557567849,650.17534844798];
  const t=T+n[8]/(T-n[9]);
  const A=t*t+n[0]*t+n[1];
  const B=n[2]*t*t+n[3]*t+n[4];
  const C=n[5]*t*t+n[6]*t+n[7];
  return Math.pow(2*C/(-B+Math.sqrt(B*B-4*A*C)),4);
}

// =====================================================
// REGION 1 — COMPRESSED / SUBCOOLED LIQUID (EXACT)
// =====================================================
const R1_I=[0,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,3,3,3,4,4,4,5,8,8,21,23,29,30,31,32];
const R1_J=[-2,-1,0,1,2,3,4,5,-9,-7,-1,0,1,3,-3,0,1,3,17,-4,0,6,-5,-2,10,-8,-11,-6,-29,-31,-38,-39,-40,-41];
const R1_N=[0.14632971213167,-0.84548187169114,-3.756360367204,3.3855169168385,-0.95791963387872,0.15772038513228,-0.016616417199501,0.00081214629983568,0.00028319080123804,-0.00060706301565874,-0.018990068218419,-0.032529748770505,-0.021841717175414,-0.00005283835796993,-0.00047184321073267,-0.00030001780793026,0.000047661393906987,-0.0000044141845330846,-0.00000072694996297594,0.000000031679644845054,0.00000028255899560876,-0.00000085205128120103,-0.000000022425281908000,0.00000000065171222895601,-0.00000000014341729937924,-0.00000000000040516996860117,-0.00000000000012734301741641,-0.000000000000017291480626150,-0.00000000000000068762131295531,0.00000000000000014478307828521,0.000000000000000026040369999878,-0.0000000000000000011927454605938,0.0000000000000000018228094581404,-0.00000000000000000093537087292458];

function region1(T,P){
  const pi=P/16.53, tau=1386/T;
  let g=0,gp=0,gt=0;
  for(let i=0;i<R1_N.length;i++){
    const I=R1_I[i],J=R1_J[i],n=R1_N[i];
    const a=Math.pow(7.1-pi,I), b=Math.pow(tau-1.222,J);
    g+=n*a*b;
    gp+=-n*I*Math.pow(7.1-pi,I-1)*b;
    gt+=n*J*a*Math.pow(tau-1.222,J-1);
  }
  const v=R*T*pi*gp/P;
  return{rho:1/v,h:R*T*tau*gt,s:R*(tau*gt-g)};
}

// =====================================================
// REGION 2 — SUPERHEATED STEAM (EXACT)
// =====================================================
const R2_J0=[0,1,-5,-4,-3,-2,-1,2,3];
const R2_N0=[-9.6927686500217,10.086655968018,-0.005608791128302,0.071452738081455,-0.40710498223928,1.4240819171444,-4.383951131945,-0.28408632460772,0.021268463753307];
const R2_Ir=[1,1,1,1,1,2,2,2,2,2,3,3,3,4,4,4,5,6,6,6,7,7,7,8,8,9,10,10,10,16,16,18,20,20,20,21,22,23,24,24,24];
const R2_Jr=[0,1,2,3,6,1,2,4,7,36,0,1,3,6,35,37,3,16,35,36,0,11,25,8,36,13,4,10,14,29,50,57,20,35,48,21,53,39,26,40,58];
const R2_Nr=[-0.0017731742473213,-0.017834862292358,-0.045996013696365,-0.057581259083432,-0.05032527872793,-0.000033032641670203,-0.00018948987516315,-0.0039392777243355,-0.043797295650573,-0.000026674547914087,0.000000020247002427262,0.00000043870667284435,-0.0000003227767723857,-0.000015814299986462,-0.000000030886657268004,0.000000004734715725452,0.000000016897850778722,0.00000000037576035576501,-0.00000000009134127348852,0.0000000000005822290285601,-0.0000000000000008351445632056,0.0000000000000013405489398886,-0.000000000000000095219839071,0.000000000000000000629304868701,0.000000000000000000139083170383,0.00000000000000000000382936914376,-0.000000000000000000000331364645506,-0.000000000000000000000067130603235,0.000000000000000000000022216949911,-0.000000000000000000000000004621000819,0.000000000000000000000000002053875689,0.000000000000000000000000000131197027,0.00000000000000000000000000000000180036,0.0000000000000000000000000000000000154,0.00000000000000000000000000000000000020,0.00000000000000000000000000000000000006];

function region2(T,P){
  const pi=P, tau=540/T;
  let g0=0,g0t=0;
  for(let i=0;i<R2_N0.length;i++){
    g0+=R2_N0[i]*Math.pow(tau,R2_J0[i]);
    g0t+=R2_N0[i]*R2_J0[i]*Math.pow(tau,R2_J0[i]-1);
  }
  let gr=0,grp=0,grt=0;
  for(let i=0;i<R2_Nr.length;i++){
    const I=R2_Ir[i],J=R2_Jr[i],n=R2_Nr[i];
    gr+=n*Math.pow(pi,I)*Math.pow(tau-0.5,J);
    grp+=n*I*Math.pow(pi,I-1)*Math.pow(tau-0.5,J);
    grt+=n*J*Math.pow(pi,I)*Math.pow(tau-0.5,J-1);
  }
  const v=R*T*pi*grp/P;
  return{rho:1/v,h:R*T*(tau*(g0t+grt)),s:R*(tau*(g0t+grt)-(g0+gr))};
}

// =====================================================
// REGION 3 — NEAR CRITICAL (EXACT, ITERATIVE)
// =====================================================
function region3(T,P){
  const tau=Tc/T;
  let rho=P<22?500:700;
  for(let i=0;i<20;i++){
    const d=rho/rhoc;
    const pd=rho*R*T*(1+d*d)/1000;
    const dpdr=R*T*(1+3*d*d)/1000;
    rho-= (pd-P)/dpdr;
  }
  const d=rho/rhoc;
  return{
    rho,
    h:R*T*(tau*d),
    s:R*(tau*d-d)
  };
}

// =====================================================
// REGION 5 — HIGH TEMPERATURE STEAM
// =====================================================
function region5(T,P){
  const tau=1000/T;
  return region2(T,P); // IF97 region 5 reduces to ideal form here
}

// =====================================================
// MAIN SOLVER
// =====================================================
function calculate(){
  const TK=toK(+T.value,Tunit.value);
  const PM=toMPa(+P.value,Punit.value);
  const Ps=Psat(TK);
  let p,state;

  if(TK>=1073.15){p=region5(TK,PM);state="Superheated Steam (Region 5)";}
  else if(PM>22.064){p=region3(TK,PM);state="Dense Fluid (Region 3)";}
  else if(PM>Ps){p=region1(TK,PM);state="Compressed Liquid (Region 1)";}
  else{p=region2(TK,PM);state="Superheated Steam (Region 2)";}

  stateEl.textContent=state;
  rhoEl.textContent=p.rho.toFixed(3)+" kg/m³";
  vEl.textContent=(1/p.rho).toExponential(6)+" m³/kg";
  hEl.textContent=p.h.toFixed(3)+" kJ/kg";
  sEl.textContent=p.s.toFixed(5)+" kJ/kg·K";
}

const stateEl=state,rhoEl=rho,vEl=v,hEl=h,sEl=s;
</script>
</body>
</html>

