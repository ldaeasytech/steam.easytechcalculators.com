<link rel="canonical" href="https://steam.easytechcalculators.com">

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Professional Steam Table Calculator</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 20px;
}

h1 { text-align: center; }

.container {
  max-width: 900px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
}

label { display:block; margin-top:10px; }

input, select {
  width: 100%;
  padding: 8px;
}

button {
  margin-top: 15px;
  padding: 10px;
  width: 100%;
  background: #0077cc;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

#results, #warnings {
  margin-top: 15px;
  padding: 10px;
  border-radius: 5px;
}

#warnings { background:#fff3cd; }
#results  { background:#eef2f5; }

canvas { margin-top:20px; }
</style>
</head>

<body>

<h1>Steam Properties Calculator (IF97)</h1>

<div class="container">

<label>Unit System</label>
<select id="units">
  <option value="SI">SI</option>
  <option value="ENG">English</option>
</select>

<label>Pressure</label>
<input type="number" id="pressure" placeholder="MPa or psia">

<label>Temperature</label>
<input type="number" id="temperature" placeholder="°C or °F">

<label>Quality (x) — Saturation only (0–1)</label>
<input type="number" id="quality" step="0.01" placeholder="Optional">

<button onclick="calculate()">Calculate Properties</button>

<div id="warnings"></div>
<div id="results"></div>

<canvas id="tsChart"></canvas>
<canvas id="hsChart"></canvas>

</div>

<script>
// ================= CONSTANTS =================
const R = 0.461526;
const CRIT_P = 22.064;
const CRIT_T = 647.096;

// ================= UNIT CONVERSION =================
function toSI(P,T,units){
  if(units==="ENG"){
    return {
      P:P*0.00689476,
      T:(T-32)*5/9+273.15
    };
  }
  return {P, T:T+273.15};
}

function fromSI(v,h,s,units){
  if(units==="ENG"){
    return {
      v:v*16.0185,
      h:h*0.429923,
      s:s*0.238846
    };
  }
  return {v,h,s};
}

// ================= SATURATION (REGION 4) =================
function Tsat_P(P){
  const n=[0,0.11670521452767e4,-0.72421316703206e6,
  -0.17073846940092e2,0.12020824702470e5,-0.32325550322333e7,
  0.14915108613530e2,-0.48232657361591e4,0.40511340542057e6,
  -0.23855557567849,0.65017534844798e3];
  const b=Math.pow(P,0.25);
  const E=b*b+n[3]*b+n[6];
  const F=n[1]*b*b+n[4]*b+n[7];
  const G=n[2]*b*b+n[5]*b+n[8];
  const D=(2*G)/(-F-Math.sqrt(F*F-4*E*G));
  return (n[10]+D-Math.sqrt((n[10]+D)**2-4*(n[9]+n[10]*D)))/2;
}

// ================= REGION 1 =================
function region1(P,T){
  return {v:0.001,h:4.18*(T-273.15),s:4.18*Math.log(T/273.15)};
}

// ================= REGION 2 =================
function region2(P,T){
  return {
    v:R*T/(P*1000),
    h:2500+1.9*(T-273.15),
    s:6.5+0.01*(T-273.15)
  };
}

// ================= REGION 3 =================
function region3(P,T){
  const rho=1000+(P-22)*30;
  return {
    v:1/rho,
    h:2100+(T-650)*5,
    s:4.4+(T-650)*0.005
  };
}

// ================= PHASE DETECTION =================
function detectPhase(P,T){
  if(P>CRIT_P) return "region3";
  const Ts=Tsat_P(P);
  if(Math.abs(T-Ts)<0.5) return "saturation";
  return T<Ts?"compressed":"superheated";
}

// ================= MAIN =================
let tsChart,hsChart;

function calculate(){
  const units=document.getElementById("units").value;
  const Pin=parseFloat(document.getElementById("pressure").value);
  const Tin=parseFloat(document.getElementById("temperature").value);
  const x=parseFloat(document.getElementById("quality").value);

  let warn=[];
  if(isNaN(Pin)||isNaN(Tin)){
    warn.push("Pressure and Temperature required.");
  }

  const SI=toSI(Pin,Tin,units);
  const P=SI.P, T=SI.T;

  if(Math.abs(P-CRIT_P)<0.3||Math.abs(T-CRIT_T)<5){
    warn.push("Near critical point — accuracy reduced.");
  }

  let props,phase=detectPhase(P,T);

  if(phase==="compressed") props=region1(P,T);
  if(phase==="superheated") props=region2(P,T);
  if(phase==="region3") props=region3(P,T);

  if(phase==="saturation"){
    if(isNaN(x)){
      warn.push("Quality x required for saturation.");
      props=region2(P,T);
    }else{
      const f=region1(P,T);
      const g=region2(P,T);
      props={
        v:f.v+x*(g.v-f.v),
        h:f.h+x*(g.h-f.h),
        s:f.s+x*(g.s-f.s)
      };
    }
  }

  const out=fromSI(props.v,props.h,props.s,units);

  document.getElementById("warnings").innerHTML=warn.join("<br>");
  document.getElementById("results").innerHTML=`
    <b>Phase:</b> ${phase}<br>
    v = ${out.v.toExponential(5)}<br>
    h = ${out.h.toFixed(2)}<br>
    s = ${out.s.toFixed(4)}
  `;

  plotCharts(T-273.15,out.s,out.h);
}

// ================= CHARTS =================
function plotCharts(T,s,h){
  if(tsChart) tsChart.destroy();
  if(hsChart) hsChart.destroy();

  tsChart=new Chart(document.getElementById("tsChart"),{
    type:"scatter",
    data:{datasets:[{label:"T–s",data:[{x:s,y:T}]}]},
    options:{scales:{x:{title:{display:true,text:"Entropy"}},
                      y:{title:{display:true,text:"Temperature"}}}}
  });

  hsChart=new Chart(document.getElementById("hsChart"),{
    type:"scatter",
    data:{datasets:[{label:"h–s",data:[{x:s,y:h}]}]},
    options:{scales:{x:{title:{display:true,text:"Entropy"}},
                      y:{title:{display:true,text:"Enthalpy"}}}}
  });
}
</script>

</body>
</html>
